## 151201

昨天为了找到解决系统中，定位文件的时候可能出现夸机器的多次查询。也就是文件目录有多少层就可能跨多少台机器才能得到文件定位的uuid。这是本设计的最大的问题，不能解决的话，系统是无法达到设计目标的。

但是，在找解决办法的时候，发现一篇元数据管理的博士论文，他的思路和我的一样，根据父目录的uuid决定文件或文件夹存在哈希环上。带来的好处就是能负载均衡，能够将一个文件夹下的目录聚集在一起。这个思路和我想的是一致的。

但是他也没有提到跨节点定位文件uuid的问题，只提到这样设计的好处。难道他是用全局表来做的？多少个文件就有多少个记录（目录+uuid或者hash(目录)+uuid），这样加速定位？这还是回到了原来的问题，

1.全局表存在单机上，单机容量有上限，不能说有扩展性；

2.全局表的访问量很大，是系统访问的入口；

3.目录更新后，全局表中的与目录相关的记录全部都会失效。

我的方向就是：如何均衡划分目录树，能够使之面向集群，并减少定位uuid的时间。

